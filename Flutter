import 'package:flutter/material.dart';
import 'dart:ui'; // Needed for ImageFilter.blur

void main() {
  runApp(const MaterialApp(
    home: UltimateFuturisticProfileCard(),
    debugShowCheckedModeBanner: false,
  ));
}

// --------------------------------------------------------------------------
// WIDGET: GlassmorphicCard
// --------------------------------------------------------------------------
class GlassmorphicCard extends StatelessWidget {
  final Widget child;
  final double borderRadius;
  final double blurStrength;
  final Color backgroundColor;
  final EdgeInsetsGeometry padding;
  final Border? border;
  final List<BoxShadow>? boxShadow; // Added for custom shadows

  const GlassmorphicCard({
    super.key,
    required this.child,
    this.borderRadius = 20.0,
    this.blurStrength = 10.0,
    this.backgroundColor = Colors.white12,
    this.padding = const EdgeInsets.all(25.0),
    this.border,
    this.boxShadow, // Initialize the new property
  });

  @override
  Widget build(BuildContext context) {
    return ClipRRect(
      borderRadius: BorderRadius.circular(borderRadius),
      child: BackdropFilter(
        filter: ImageFilter.blur(sigmaX: blurStrength, sigmaY: blurStrength),
        child: Container(
          decoration: BoxDecoration(
            color: backgroundColor,
            borderRadius: BorderRadius.circular(borderRadius),
            border: border,
            boxShadow: boxShadow ?? // Use provided shadows or a default 3D-like set
                <BoxShadow>[
                  BoxShadow(
                    color: Colors.black.withAlpha((255 * 0.35).round()), // Enhanced depth
                    blurRadius: 35,
                    spreadRadius: 7,
                    offset: const Offset(12, 12),
                  ),
                  BoxShadow(
                    color: Colors.white.withAlpha((255 * 0.07).round()), // Enhanced highlight
                    blurRadius: 12,
                    spreadRadius: 3,
                    offset: const Offset(-6, -6),
                  ),
                ],
          ),
          padding: padding,
          child: child,
        ),
      ),
    );
  }
}

// --------------------------------------------------------------------------
// WIDGET: InteractiveNeonAvatar
// --------------------------------------------------------------------------
class InteractiveNeonAvatar extends StatefulWidget {
  final String imageUrl;
  final double radius;
  final Color accentColor;

  const InteractiveNeonAvatar({
    super.key,
    required this.imageUrl,
    this.radius = 60,
    required this.accentColor,
  });

  @override
  State<InteractiveNeonAvatar> createState() => _InteractiveNeonAvatarState();
}

class _InteractiveNeonAvatarState extends State<InteractiveNeonAvatar>
    with SingleTickerProviderStateMixin {
  late AnimationController _controller;
  late Animation<double> _animation;

  @override
  void initState() {
    super.initState();
    _controller = AnimationController(
      vsync: this,
      duration: const Duration(seconds: 2),
    )..repeat(reverse: true);
    _animation = Tween<double>(begin: 0.0, end: 1.0).animate(
      CurvedAnimation(parent: _controller, curve: Curves.easeInOut),
    );
  }

  @override
  void dispose() {
    _controller.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    return AnimatedBuilder(
      animation: _animation,
      builder: (BuildContext context, Widget? child) {
        final double glowRadius = 7.0 + (_animation.value * 12.0); // Enhanced glow
        final double blurRadius = 15.0 + (_animation.value * 20.0); // Enhanced blur
        final double opacity = 0.5 + (_animation.value * 0.5);

        return Stack(
          alignment: Alignment.center,
          children: <Widget>[
            // Outer glow container
            Container(
              width: (widget.radius + glowRadius) * 2,
              height: (widget.radius + glowRadius) * 2,
              decoration: BoxDecoration(
                shape: BoxShape.circle,
                boxShadow: <BoxShadow>[
                  BoxShadow(
                    color: widget.accentColor.withAlpha((255 * opacity).round()),
                    blurRadius: blurRadius,
                    spreadRadius: glowRadius,
                  ),
                ],
              ),
            ),
            // The actual avatar, with a layered 3D frame effect
            Container(
              decoration: BoxDecoration(
                shape: BoxShape.circle,
                border: Border.all(
                  color:
                      Colors.white.withAlpha((255 * (0.25 + (_animation.value * 0.1))).round()), // Stronger dynamic border
                  width: 3.0, // Thicker border
                ),
                boxShadow: <BoxShadow>[
                  BoxShadow(
                    color: Colors.black.withAlpha((255 * 0.7).round()), // Deeper recess
                    blurRadius: 20, // More blur
                    spreadRadius: -10, // More recess
                    offset: const Offset(0, 5), // Slightly lower to create depth
                  ),
                  BoxShadow(
                    color: Colors.white.withAlpha((255 * (0.15 + (_animation.value * 0.07))).round()), // Brighter, more dynamic highlight
                    blurRadius: 8, // More blur
                    spreadRadius: -2, // More pop
                    offset: const Offset(-3, -3),
                  ),
                ],
                gradient: LinearGradient(
                  begin: Alignment.topLeft,
                  end: Alignment.bottomRight,
                  colors: <Color>[
                    Colors.white.withAlpha((255 * 0.12).round()), // Slightly brighter
                    Colors.black.withAlpha((255 * 0.25).round()), // Slightly darker
                  ],
                ),
              ),
              child: CircleAvatar(
                radius: widget.radius,
                backgroundImage: NetworkImage(widget.imageUrl),
                backgroundColor: Colors.transparent,
              ),
            ),
          ],
        );
      },
    );
  }
}

// --------------------------------------------------------------------------
// WIDGET: UltraModernActionButton
// --------------------------------------------------------------------------
class UltraModernActionButton extends StatefulWidget {
  final String label;
  final IconData icon;
  final VoidCallback onPressed;
  final Color color;

  const UltraModernActionButton({
    super.key,
    required this.label,
    required this.icon,
    required this.onPressed,
    required this.color,
  });

  @override
  State<UltraModernActionButton> createState() => _UltraModernActionButtonState();
}

class _UltraModernActionButtonState extends State<UltraModernActionButton>
    with SingleTickerProviderStateMixin {
  late AnimationController _controller;

  @override
  void initState() {
    super.initState();
    _controller = AnimationController(
      vsync: this,
      duration: const Duration(milliseconds: 1000),
    )..repeat(reverse: true);
  }

  @override
  void dispose() {
    _controller.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    return AnimatedBuilder(
      animation: _controller,
      builder: (BuildContext context, Widget? child) {
        final double scale = 1.0 + (_controller.value * 0.05);
        final double opacity = 0.7 + (_controller.value * 0.3);

        return Transform.scale(
          scale: scale,
          child: Container(
            decoration: BoxDecoration(
              borderRadius: BorderRadius.circular(10),
              gradient: LinearGradient( // Enhanced gradient for more depth
                begin: Alignment.topLeft,
                end: Alignment.bottomRight,
                colors: <Color>[
                  widget.color.withAlpha((255 * opacity * 0.9).round()), // Slightly brighter start
                  widget.color.withAlpha((255 * opacity * 1.0).round()), // Peak intensity
                  widget.color.withAlpha((255 * opacity * 0.9).round()), // Mid tone
                  widget.color.withAlpha((255 * opacity * 0.8).round()), // Slightly darker end
                ],
                stops: const <double>[0.0, 0.4, 0.8, 1.0], // More detailed stops
              ),
              boxShadow: <BoxShadow>[ // Enhanced shadows for more lift
                BoxShadow(
                  color: widget.color.withAlpha((255 * opacity * 0.5).round()), // More intense glow
                  blurRadius: 25, // More blur
                  spreadRadius: 5, // More spread
                  offset: const Offset(0, 12),
                ),
                BoxShadow(
                  color: Colors.white.withAlpha((255 * opacity * 0.15).round()), // Brighter highlight
                  blurRadius: 10, // More blur
                  spreadRadius: 2, // More spread
                  offset: const Offset(-4, -4),
                ),
                BoxShadow(
                  color: Colors.black.withAlpha((255 * opacity * 0.4).round()), // Deeper shadow
                  blurRadius: 8, // More blur
                  spreadRadius: 2, // More spread
                  offset: const Offset(4, 4),
                ),
              ],
              border: Border.all(
                  color: Colors.white.withAlpha((255 * opacity * 0.5).round()),
                  width: 1.5),
            ),
            child: ElevatedButton.icon(
              onPressed: widget.onPressed,
              icon: Icon(widget.icon,
                  color: Colors.white.withAlpha((255 * opacity).round())),
              label: Text(
                widget.label,
                style: TextStyle(
                    color: Colors.white.withAlpha((255 * opacity).round()),
                    fontWeight: FontWeight.bold),
              ),
              style: ElevatedButton.styleFrom(
                backgroundColor: Colors.transparent, // Let Container handle background
                shadowColor: Colors.transparent, // Let Container handle shadow
                padding:
                    const EdgeInsets.symmetric(horizontal: 25, vertical: 12),
                shape: RoundedRectangleBorder(
                  borderRadius: BorderRadius.circular(10),
                ),
                elevation: 0, // Let Container handle elevation
                visualDensity: VisualDensity.compact,
              ),
            ),
          ),
        );
      },
    );
  }
}

// --------------------------------------------------------------------------
// WIDGET: InfoBlock
// --------------------------------------------------------------------------
class InfoBlock extends StatelessWidget {
  final String title;
  final List<Widget> children;

  const InfoBlock({
    super.key,
    required this.title,
    required this.children,
  });

  @override
  Widget build(BuildContext context) {
    return Column(
      crossAxisAlignment: CrossAxisAlignment.start,
      children: <Widget>[
        Text(
          title,
          style: TextStyle(
            color: UltimateFuturisticProfileCard.neonAccent
                .withAlpha((255 * 0.9).round()),
            fontSize: 14,
            fontWeight: FontWeight.bold,
            letterSpacing: 1.5,
          ),
        ),
        const SizedBox(height: 10),
        Column(children: children),
        const SizedBox(height: 20), // Spacing after each block
      ],
    );
  }
}

// --------------------------------------------------------------------------
// WIDGET: AIStatTile (New for AI Proficiency - enhanced 3D)
// --------------------------------------------------------------------------
class AIStatTile extends StatefulWidget {
  final String label;
  final double value; // Value from 0.0 to 1.0 for progress bar
  final Color accentColor;

  const AIStatTile({
    super.key,
    required this.label,
    required this.value,
    required this.accentColor,
  });

  @override
  State<AIStatTile> createState() => _AIStatTileState();
}

class _AIStatTileState extends State<AIStatTile>
    with SingleTickerProviderStateMixin {
  late AnimationController _controller;
  late Animation<double> _animation;

  @override
  void initState() {
    super.initState();
    _controller = AnimationController(
      vsync: this,
      duration: const Duration(milliseconds: 1500),
    );
    _animation = Tween<double>(begin: 0.0, end: widget.value).animate(
      CurvedAnimation(parent: _controller, curve: Curves.easeOutCubic),
    );
    _controller.forward();
  }

  @override
  void didUpdateWidget(covariant AIStatTile oldWidget) {
    super.didUpdateWidget(oldWidget);
    if (oldWidget.value != widget.value) {
      _animation = Tween<double>(begin: oldWidget.value, end: widget.value).animate(
        CurvedAnimation(parent: _controller, curve: Curves.easeOutCubic),
      );
      _controller.forward(from: 0.0);
    }
  }

  @override
  void dispose() {
    _controller.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    return Padding(
      padding: const EdgeInsets.symmetric(vertical: 8.0),
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: <Widget>[
          Text(
            widget.label,
            style: const TextStyle(
              color: Colors.white70,
              fontSize: 15,
              fontWeight: FontWeight.w400,
            ),
          ),
          const SizedBox(height: 5),
          AnimatedBuilder(
            animation: _animation,
            builder: (BuildContext context, Widget? child) {
              return Container(
                height: 10,
                decoration: BoxDecoration(
                  color: Colors.black.withAlpha((255 * 0.4).round()),
                  borderRadius: BorderRadius.circular(5),
                  border: Border.all(color: Colors.white10, width: 0.5),
                  boxShadow: <BoxShadow>[ // Enhanced shadows for recessed track
                    BoxShadow(
                      color: Colors.black.withAlpha((255 * 0.8).round()), // Deeper shadow
                      blurRadius: 8, // More blur
                      spreadRadius: -3, // More recess
                      offset: const Offset(0, 3), // More offset
                    ),
                    BoxShadow( // Add a subtle inner highlight for the track border
                      color: Colors.white.withAlpha((255 * 0.05).round()),
                      blurRadius: 3,
                      spreadRadius: 0,
                      offset: const Offset(0, -1),
                    ),
                  ],
                ),
                child: LayoutBuilder(
                  builder: (BuildContext context, BoxConstraints constraints) {
                    return Stack(
                      children: <Widget>[
                        Align(
                          alignment: Alignment.centerLeft,
                          child: FractionallySizedBox(
                            widthFactor: _animation.value,
                            child: Container(
                              decoration: BoxDecoration(
                                borderRadius: BorderRadius.circular(5),
                                gradient: LinearGradient(
                                  colors: <Color>[
                                    widget.accentColor.withAlpha((255 * 0.7).round()),
                                    widget.accentColor.withAlpha((255 * 1.0).round()),
                                    widget.accentColor.withAlpha((255 * 0.8).round()),
                                  ],
                                  begin: Alignment.centerLeft,
                                  end: Alignment.centerRight,
                                ),
                                boxShadow: <BoxShadow>[ // Enhanced shadows for glowing fill
                                  BoxShadow(
                                    color: widget.accentColor.withAlpha((255 * 0.7).round()), // Stronger glow
                                    blurRadius: 15, // More blur
                                    spreadRadius: 3, // More spread
                                    offset: const Offset(0, 0),
                                  ),
                                  BoxShadow( // Add a subtle "raised" effect from above
                                    color: Colors.white.withAlpha((255 * 0.2).round()),
                                    blurRadius: 5,
                                    spreadRadius: 1,
                                    offset: const Offset(0, -2), // Slight upward offset
                                  ),
                                ],
                              ),
                            ),
                          ),
                        ),
                      ],
                    );
                  },
                ),
              );
            },
          ),
        ],
      ),
    );
  }
}

// --------------------------------------------------------------------------
// WIDGET: SimpleInfoRow (for Contact, Enrollment, etc. - enhanced 3D "data chip")
// --------------------------------------------------------------------------
class SimpleInfoRow extends StatelessWidget {
  final IconData icon;
  final String label;
  final String value;
  final Color iconColor;
  final Color textColor;

  const SimpleInfoRow({
    super.key,
    required this.icon,
    required this.label,
    required this.value,
    this.iconColor = Colors.white54,
    this.textColor = Colors.white,
  });

  @override
  Widget build(BuildContext context) {
    return Container(
      margin: const EdgeInsets.symmetric(vertical: 6.0),
      padding: const EdgeInsets.all(14.0),
      decoration: BoxDecoration(
        color: Colors.white.withAlpha((255 * 0.08).round()),
        borderRadius: BorderRadius.circular(12),
        border: Border.all(color: Colors.white.withAlpha((255 * 0.15).round()), width: 1.0), // Slightly more pronounced border
        boxShadow: <BoxShadow>[ // Enhanced shadows for more pronounced "chip" effect
          BoxShadow(
            color: Colors.black.withAlpha((255 * 0.5).round()), // Deeper shadow
            blurRadius: 15, // More blur
            spreadRadius: -4, // More recess
            offset: const Offset(4, 4), // More offset
          ),
          BoxShadow(
            color: Colors.white.withAlpha((255 * 0.08).round()), // Brighter highlight
            blurRadius: 8, // More blur
            spreadRadius: -1, // More pop
            offset: const Offset(-3, -3),
          ),
        ],
      ),
      child: Row(
        children: <Widget>[
          Icon(icon, color: iconColor, size: 24),
          const SizedBox(width: 18),
          Expanded(
            child: Column(
              crossAxisAlignment: CrossAxisAlignment.start,
              children: <Widget>[
                Text(
                  label,
                  style: const TextStyle(
                    color: Colors.white54,
                    fontSize: 14,
                    fontWeight: FontWeight.w300,
                  ),
                ),
                const SizedBox(height: 4),
                Text(
                  value,
                  style: TextStyle(
                    color: textColor,
                    fontSize: 17,
                    fontWeight: FontWeight.w500,
                  ),
                ),
              ],
            ),
          ),
        ],
      ),
    );
  }
}

// --------------------------------------------------------------------------
// MAIN WIDGET: UltimateFuturisticProfileCard
// --------------------------------------------------------------------------

class UltimateFuturisticProfileCard extends StatefulWidget {
  const UltimateFuturisticProfileCard({super.key});

  // Define a fresh color palette
  static const Color primaryColor = Color(0xFF1A004B); // Very Dark Purple/Black
  static const Color primaryLight = Color(0xFF6A1B9A);
  static const Color neonAccent = Color(0xFF00E676); // Brighter Green Neon
  static const Color techAccent = Color(0xFF00B0FF); // Blue Accent for Tech Stats
  static const Color aiAssistantColor = Color(0xFFFF4081); // Vibrant Pink/Red Accent

  @override
  State<UltimateFuturisticProfileCard> createState() => _UltimateFuturisticProfileCardState();
}

class _UltimateFuturisticProfileCardState extends State<UltimateFuturisticProfileCard> {
  String _selectedMenuItem = 'Dashboard'; // Default to Dashboard

  void _updateSelectedMenuItem(String value) {
    setState(() => _selectedMenuItem = value);
    Navigator.maybePop(context); // Close the drawer after clicking, safely.
  }

  // ========== Page Builders ==========

  Widget _buildDashboard() {
    return SingleChildScrollView(
      padding: const EdgeInsets.all(25.0),
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.center,
        children: <Widget>[
          GlassmorphicCard(
            backgroundColor: UltimateFuturisticProfileCard.primaryLight.withAlpha((255 * 0.3).round()),
            child: Column(
              children: <Widget>[
                Icon(Icons.dashboard_outlined, size: 80, color: UltimateFuturisticProfileCard.neonAccent.withAlpha((255 * 0.8).round())),
                const SizedBox(height: 20),
                const Text(
                  "WELCOME, ROHAN!",
                  style: TextStyle(
                    color: Colors.white,
                    fontSize: 28,
                    fontWeight: FontWeight.w900,
                    letterSpacing: 2.0,
                  ),
                  textAlign: TextAlign.center,
                ),
                const SizedBox(height: 10),
                Text(
                  "Use the side menu to explore your student portal.\nCurrently: $_selectedMenuItem",
                  style: const TextStyle(color: Colors.white70, fontSize: 16),
                  textAlign: TextAlign.center,
                ),
                const SizedBox(height: 30),
                UltraModernActionButton(
                  label: 'AI ASSISTANT: ONLINE',
                  color: UltimateFuturisticProfileCard.aiAssistantColor,
                  icon: Icons.mic_external_on,
                  onPressed: () {
                    debugPrint("AI Assistant Activated!");
                    ScaffoldMessenger.of(context).showSnackBar(
                      const SnackBar(
                        content: Text('AI Assistant Activated! How can I help?'),
                        backgroundColor: UltimateFuturisticProfileCard.aiAssistantColor,
                      ),
                    );
                  },
                ),
              ],
            ),
          ),
          const SizedBox(height: 30),
          GlassmorphicCard(
            backgroundColor: UltimateFuturisticProfileCard.primaryLight.withAlpha((255 * 0.2).round()),
            padding: const EdgeInsets.all(20),
            child: Column(
              children: <Widget>[
                InfoBlock(
                  title: 'QUICK LINKS',
                  children: <Widget>[
                    _dashboardQuickLink(
                      icon: Icons.person_outline,
                      label: 'View Profile',
                      onTap: () => _updateSelectedMenuItem('Profile'),
                      color: UltimateFuturisticProfileCard.techAccent,
                    ),
                    _dashboardQuickLink(
                      icon: Icons.school_outlined,
                      label: 'My Academics',
                      onTap: () => _updateSelectedMenuItem('Academics'),
                      color: UltimateFuturisticProfileCard.neonAccent,
                    ),
                    _dashboardQuickLink(
                      icon: Icons.schedule_outlined,
                      label: 'View Timetable',
                      onTap: () => _updateSelectedMenuItem('Timetable'),
                      color: UltimateFuturisticProfileCard.aiAssistantColor,
                    ),
                  ],
                ),
              ],
            ),
          ),
        ],
      ),
    );
  }

  Widget _dashboardQuickLink({
    required IconData icon,
    required String label,
    required VoidCallback onTap,
    required Color color,
  }) {
    return Container(
      margin: const EdgeInsets.symmetric(vertical: 8),
      decoration: BoxDecoration(
        color: color.withAlpha((255 * 0.1).round()),
        borderRadius: BorderRadius.circular(10),
        border: Border.all(color: color.withAlpha((255 * 0.3).round()), width: 1),
        boxShadow: <BoxShadow>[
          BoxShadow(
            color: color.withAlpha((255 * 0.2).round()),
            blurRadius: 10,
            spreadRadius: 2,
            offset: const Offset(0, 5),
          ),
        ],
      ),
      child: ListTile(
        leading: Icon(icon, color: color.withAlpha((255 * 0.8).round()), size: 30),
        title: Text(label, style: const TextStyle(color: Colors.white, fontSize: 18)),
        trailing: const Icon(Icons.arrow_forward_ios, color: Colors.white54),
        onTap: onTap,
      ),
    );
  }

  Widget _buildProfile() {
    return SingleChildScrollView(
      padding: const EdgeInsets.symmetric(horizontal: 25, vertical: 20),
      child: Column(
        children: <Widget>[
          GlassmorphicCard(
            boxShadow: <BoxShadow>[
              BoxShadow(
                color: Colors.black.withAlpha((255 * 0.5).round()),
                blurRadius: 50,
                spreadRadius: 10,
                offset: const Offset(18, 18),
              ),
              BoxShadow(
                color: Colors.white.withAlpha((255 * 0.1).round()),
                blurRadius: 20,
                spreadRadius: 4,
                offset: const Offset(-10, -10),
              ),
              BoxShadow(
                color: UltimateFuturisticProfileCard.primaryLight.withAlpha((255 * 0.6).round()),
                blurRadius: 60,
                spreadRadius: 25,
                offset: const Offset(0, 35),
              ),
            ],
            child: Column(
              crossAxisAlignment: CrossAxisAlignment.center,
              children: <Widget>[
                InteractiveNeonAvatar(
                  accentColor: UltimateFuturisticProfileCard.neonAccent,
                  imageUrl: 'https://www.gstatic.com/flutter-onestack-prototype/genui/example_1.jpg',
                  radius: 70,
                ),
                const SizedBox(height: 25),
                const Text(
                  'ROHAN VERMA',
                  style: TextStyle(
                    fontSize: 28,
                    fontWeight: FontWeight.w900,
                    color: Colors.white,
                    letterSpacing: 2.0,
                    shadows: <Shadow>[
                      Shadow(color: UltimateFuturisticProfileCard.primaryLight, blurRadius: 10)
                    ],
                  ),
                ),
                const SizedBox(height: 6),
                Text(
                  'B.Tech - AI & DS | 2nd Year',
                  style: TextStyle(
                    fontSize: 17,
                    color: Colors.white70,
                    fontWeight: FontWeight.w500,
                    shadows: <Shadow>[
                      Shadow(
                        color: Colors.black.withAlpha((255 * 0.5).round()),
                        blurRadius: 5,
                        offset: const Offset(2, 2),
                      )
                    ],
                  ),
                ),
                const SizedBox(height: 20),

                // Enhanced Divider for 3D effect
                Container(
                  margin: const EdgeInsets.symmetric(vertical: 20),
                  height: 2.0,
                  decoration: BoxDecoration(
                    gradient: LinearGradient(
                      colors: <Color>[
                        Colors.transparent,
                        UltimateFuturisticProfileCard.neonAccent.withAlpha((255 * 0.5).round()),
                        Colors.white.withAlpha((255 * 0.2).round()),
                        UltimateFuturisticProfileCard.neonAccent.withAlpha((255 * 0.5).round()),
                        Colors.transparent,
                      ],
                      stops: const <double>[0.0, 0.2, 0.5, 0.8, 1.0],
                    ),
                    boxShadow: <BoxShadow>[
                      BoxShadow(
                        color: UltimateFuturisticProfileCard.neonAccent.withAlpha((255 * 0.4).round()),
                        blurRadius: 15,
                        spreadRadius: 2,
                        offset: const Offset(0, 0),
                      ),
                    ],
                  ),
                ),

                // --- MODULAR INFO BLOCK: AI Proficiency ---
                InfoBlock(
                  title: 'AI PROFICIENCY',
                  children: <Widget>[
                    AIStatTile(
                      label: 'Machine Learning',
                      value: 0.85,
                      accentColor: UltimateFuturisticProfileCard.techAccent,
                    ),
                    AIStatTile(
                      label: 'Deep Learning',
                      value: 0.70,
                      accentColor: UltimateFuturisticProfileCard.techAccent,
                    ),
                    AIStatTile(
                      label: 'Natural Language Processing',
                      value: 0.60,
                      accentColor: UltimateFuturisticProfileCard.techAccent,
                    ),
                    AIStatTile(
                      label: 'Computer Vision',
                      value: 0.75,
                      accentColor: UltimateFuturisticProfileCard.techAccent,
                    ),
                  ],
                ),

                // --- MODULAR INFO BLOCK: ACADEMIC DETAILS ---
                InfoBlock(
                  title: 'ACADEMIC DETAILS',
                  children: <Widget>[
                    SimpleInfoRow(
                      icon: Icons.school,
                      label: 'Enrollment ID',
                      value: 'GLAU21BTECH12345',
                      iconColor: UltimateFuturisticProfileCard.neonAccent,
                    ),
                    SimpleInfoRow(
                      icon: Icons.calendar_today,
                      label: 'Admission Year',
                      value: '2021',
                      iconColor: UltimateFuturisticProfileCard.neonAccent,
                    ),
                    SimpleInfoRow(
                      icon: Icons.grade,
                      label: 'Current GPA',
                      value: '8.7 / 10.0',
                      iconColor: UltimateFuturisticProfileCard.neonAccent,
                    ),
                  ],
                ),

                // --- MODULAR INFO BLOCK: CONTACT INFORMATION ---
                InfoBlock(
                  title: 'CONTACT INFORMATION',
                  children: <Widget>[
                    SimpleInfoRow(
                      icon: Icons.email,
                      label: 'Email',
                      value: 'rohan.verma@gla.ac.in',
                      iconColor: UltimateFuturisticProfileCard.aiAssistantColor,
                    ),
                    SimpleInfoRow(
                      icon: Icons.phone,
                      label: 'Mobile',
                      value: '+91 98765 43210',
                      iconColor: UltimateFuturisticProfileCard.aiAssistantColor,
                    ),
                    SimpleInfoRow(
                      icon: Icons.location_on,
                      label: 'Address',
                      value: 'Agra, Uttar Pradesh, India',
                      iconColor: UltimateFuturisticProfileCard.aiAssistantColor,
                    ),
                  ],
                ),
              ],
            ),
          ),
        ],
      ),
    );
  }

  Widget _buildAcademics() {
    final List<Map<String, Object>> courses = <Map<String, Object>>[
      <String, Object>{"Course": "Machine Learning", "Grade": "A", "Credits": 4},
      <String, Object>{"Course": "Deep Learning", "Grade": "A-", "Credits": 4},
      <String, Object>{"Course": "Natural Language Processing", "Grade": "B+", "Credits": 3},
      <String, Object>{"Course": "Database Management", "Grade": "A", "Credits": 3},
      <String, Object>{"Course": "Python Programming", "Grade": "A", "Credits": 3},
      <String, Object>{"Course": "AI Ethics", "Grade": "B", "Credits": 2},
    ];

    return SingleChildScrollView(
      padding: const EdgeInsets.all(25),
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: <Widget>[
          Text("üéì Academics", style: TextStyle(color: Colors.white, fontSize: 26, fontWeight: FontWeight.bold)),
          const SizedBox(height: 20),
          GlassmorphicCard(
            backgroundColor: UltimateFuturisticProfileCard.primaryLight.withAlpha((255 * 0.2).round()),
            padding: EdgeInsets.zero,
            child: DataTable(
              headingRowColor: WidgetStateProperty.all<Color>(Colors.white12),
              columns: const <DataColumn>[
                DataColumn(label: Text('Course', style: TextStyle(color: Colors.white70, fontWeight: FontWeight.bold))),
                DataColumn(label: Text('Grade', style: TextStyle(color: Colors.white70, fontWeight: FontWeight.bold))),
                DataColumn(label: Text('Credits', style: TextStyle(color: Colors.white70, fontWeight: FontWeight.bold))),
              ],
              rows: courses
                  .map<DataRow>((Map<String, Object> course) => DataRow(cells: <DataCell>[
                        DataCell(Text(course["Course"].toString(), style: const TextStyle(color: Colors.white))),
                        DataCell(Text(course["Grade"].toString(), style: const TextStyle(color: Colors.white))),
                        DataCell(Text(course["Credits"].toString(), style: const TextStyle(color: Colors.white))),
                      ]))
                  .toList(),
            ),
          ),
        ],
      ),
    );
  }

  Widget _buildAttendance() {
    final Map<String, int> attendance = <String, int>{
      "Machine Learning": 92,
      "Deep Learning": 88,
      "Python Programming": 95,
      "Database Management": 90,
      "AI Ethics": 85,
    };

    return SingleChildScrollView(
      padding: const EdgeInsets.all(25),
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: <Widget>[
          Text("üìÖ Attendance", style: TextStyle(color: Colors.white, fontSize: 26, fontWeight: FontWeight.bold)),
          const SizedBox(height: 20),
          GlassmorphicCard(
            backgroundColor: UltimateFuturisticProfileCard.primaryLight.withAlpha((255 * 0.2).round()),
            child: Column(
              children: attendance.entries.map<Widget>((MapEntry<String, int> entry) {
                return Padding(
                  padding: const EdgeInsets.symmetric(vertical: 8),
                  child: Column(
                    crossAxisAlignment: CrossAxisAlignment.start,
                    children: <Widget>[
                      Text(entry.key, style: const TextStyle(color: Colors.white70, fontWeight: FontWeight.bold)),
                      const SizedBox(height: 4),
                      LinearProgressIndicator(
                        value: entry.value / 100,
                        color: UltimateFuturisticProfileCard.neonAccent,
                        backgroundColor: Colors.white12,
                        minHeight: 10,
                      ),
                      const SizedBox(height: 4),
                      Text("${entry.value}%", style: const TextStyle(color: Colors.white60)),
                    ],
                  ),
                );
              }).toList(),
            ),
          ),
        ],
      ),
    );
  }

  Widget _buildSubjectiveQuiz() {
    final List<Map<String, String>> quizzes = <Map<String, String>>[
      <String, String>{"Title": "ML Concepts Quiz", "Status": "Completed", "Score": "85/100"},
      <String, String>{"Title": "Ethics in AI", "Status": "Pending", "Score": "-"},
      <String, String>{"Title": "Deep Learning Basics", "Status": "Completed", "Score": "90/100"},
      <String, String>{"Title": "Database Systems", "Status": "Pending", "Score": "-"},
    ];

    return SingleChildScrollView(
      padding: const EdgeInsets.all(25),
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: <Widget>[
          Text("üß† Subjective Quizzes", style: TextStyle(color: Colors.white, fontSize: 26, fontWeight: FontWeight.bold)),
          const SizedBox(height: 20),
          GlassmorphicCard(
            backgroundColor: UltimateFuturisticProfileCard.primaryLight.withAlpha((255 * 0.2).round()),
            padding: const EdgeInsets.symmetric(horizontal: 0),
            child: Column(
              children: quizzes.map<Widget>((Map<String, String> quiz) {
                return Card(
                  color: UltimateFuturisticProfileCard.primaryColor.withAlpha((255 * 0.7).round()), // Darker shade for card
                  margin: const EdgeInsets.symmetric(vertical: 8, horizontal: 15),
                  child: ListTile(
                    title: Text(quiz["Title"]!, style: const TextStyle(color: Colors.white)),
                    subtitle: Text("Status: ${quiz["Status"]} | Score: ${quiz["Score"]}", style: const TextStyle(color: Colors.white70)),
                    trailing: quiz["Status"] == "Pending"
                        ? UltraModernActionButton(
                            label: "Start",
                            icon: Icons.play_arrow,
                            color: UltimateFuturisticProfileCard.neonAccent,
                            onPressed: () {
                              ScaffoldMessenger.of(context).showSnackBar(
                                const SnackBar(content: Text('Starting quiz...')),
                              );
                            },
                          )
                        : Icon(Icons.check_circle, color: UltimateFuturisticProfileCard.neonAccent),
                  ),
                );
              }).toList(),
            ),
          ),
        ],
      ),
    );
  }

  Widget _buildResult() {
    final List<Map<String, String>> results = <Map<String, String>>[
      <String, String>{"Exam": "Midterm Exam", "Date": "2025-08-15", "Grade": "A"},
      <String, String>{"Exam": "Assignment 1", "Date": "2025-07-20", "Grade": "A-"},
      <String, String>{"Exam": "Quiz 3", "Date": "2025-09-01", "Grade": "B+"},
      <String, String>{"Exam": "Final Exam", "Date": "2025-12-10", "Grade": "-"},
    ];

    return SingleChildScrollView(
      padding: const EdgeInsets.all(25),
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: <Widget>[
          Text("üèÜ Results", style: TextStyle(color: Colors.white, fontSize: 26, fontWeight: FontWeight.bold)),
          const SizedBox(height: 20),
          GlassmorphicCard(
            backgroundColor: UltimateFuturisticProfileCard.primaryLight.withAlpha((255 * 0.2).round()),
            padding: EdgeInsets.zero,
            child: DataTable(
              headingRowColor: WidgetStateProperty.all<Color>(Colors.white12),
              columns: const <DataColumn>[
                DataColumn(label: Text('Exam', style: TextStyle(color: Colors.white70, fontWeight: FontWeight.bold))),
                DataColumn(label: Text('Date', style: TextStyle(color: Colors.white70, fontWeight: FontWeight.bold))),
                DataColumn(label: Text('Grade', style: TextStyle(color: Colors.white70, fontWeight: FontWeight.bold))),
              ],
              rows: results
                  .map<DataRow>((Map<String, String> res) => DataRow(cells: <DataCell>[
                        DataCell(Text(res["Exam"]!, style: const TextStyle(color: Colors.white))),
                        DataCell(Text(res["Date"]!, style: const TextStyle(color: Colors.white))),
                        DataCell(Text(res["Grade"]!, style: const TextStyle(color: Colors.white))),
                      ]))
                  .toList(),
            ),
          ),
        ],
      ),
    );
  }

  Widget _buildTimetable() {
    return SingleChildScrollView(
      padding: const EdgeInsets.all(25.0),
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: <Widget>[
          Text("üìÖ Weekly Timetable",
              style: TextStyle(color: Colors.white, fontSize: 26, fontWeight: FontWeight.bold)),
          const SizedBox(height: 20),
          GlassmorphicCard(
            backgroundColor: UltimateFuturisticProfileCard.primaryLight.withAlpha((255 * 0.2).round()),
            padding: EdgeInsets.zero,
            child: Table(
              border: TableBorder.all(color: Colors.white30, width: 1.2),
              columnWidths: const <int, TableColumnWidth>{
                0: FixedColumnWidth(90),
                1: FlexColumnWidth(),
                2: FlexColumnWidth(),
                3: FlexColumnWidth(),
              },
              children: <TableRow>[
                _buildTableRow("Day", "9AM-11AM", "11AM-1PM", "2PM-4PM", isHeader: true),
                _buildTableRow("Monday", "Maths", "AI & DS", "ML Lab"),
                _buildTableRow("Tuesday", "Python", "DL", "Communication"),
                _buildTableRow("Wednesday", "ML", "NLP", "Sports"),
                _buildTableRow("Thursday", "AI Ethics", "DBMS", "DL Lab"),
                _buildTableRow("Friday", "Project", "ML", "AI Seminar"),
              ],
            ),
          ),
        ],
      ),
    );
  }

  TableRow _buildTableRow(String c1, String c2, String c3, String c4, {bool isHeader = false}) {
    final TextStyle textStyle = TextStyle(
      color: isHeader ? UltimateFuturisticProfileCard.neonAccent.withAlpha((255 * 0.9).round()) : Colors.white,
      fontWeight: isHeader ? FontWeight.bold : FontWeight.normal,
      fontSize: 15,
    );
    return TableRow(
      children: <Widget>[
        _buildCell(c1, textStyle, isHeader),
        _buildCell(c2, textStyle, isHeader),
        _buildCell(c3, textStyle, isHeader),
        _buildCell(c4, textStyle, isHeader),
      ],
    );
  }

  Widget _buildCell(String text, TextStyle style, bool isHeader) {
    return Container(
      padding: const EdgeInsets.all(12),
      color: isHeader ? Colors.white10 : Colors.transparent,
      child: Center(child: Text(text, style: style)),
    );
  }

  Widget _buildLibrary() {
    final List<Map<String, String>> books = <Map<String, String>>[
      <String, String>{"Title": "Artificial Intelligence: A Modern Approach", "Author": "Stuart Russell"},
      <String, String>{"Title": "Deep Learning", "Author": "Ian Goodfellow"},
      <String, String>{"Title": "Flutter in Action", "Author": "Eric Windmill"},
      <String, String>{"Title": "Clean Code", "Author": "Robert C. Martin"},
    ];

    return SingleChildScrollView(
      padding: const EdgeInsets.all(25),
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: <Widget>[
          Text("üìö Library Books", style: TextStyle(color: Colors.white, fontSize: 26, fontWeight: FontWeight.bold)),
          const SizedBox(height: 20),
          GlassmorphicCard(
            backgroundColor: UltimateFuturisticProfileCard.primaryLight.withAlpha((255 * 0.2).round()),
            padding: const EdgeInsets.symmetric(horizontal: 0),
            child: Column(
              children: books.map<Widget>((Map<String, String> book) {
                return Card(
                  color: UltimateFuturisticProfileCard.primaryColor.withAlpha((255 * 0.7).round()),
                  margin: const EdgeInsets.symmetric(vertical: 8, horizontal: 15),
                  child: ListTile(
                    leading: Icon(Icons.book, color: UltimateFuturisticProfileCard.techAccent),
                    title: Text(book["Title"]!, style: const TextStyle(color: Colors.white)),
                    subtitle: Text("Author: ${book["Author"]}", style: const TextStyle(color: Colors.white70)),
                    trailing: UltraModernActionButton(
                      label: "Borrow",
                      icon: Icons.add_task,
                      color: UltimateFuturisticProfileCard.neonAccent,
                      onPressed: () {
                        ScaffoldMessenger.of(context).showSnackBar(
                          SnackBar(content: Text('Requested to borrow "${book["Title"]}"')),
                        );
                      },
                    ),
                  ),
                );
              }).toList(),
            ),
          ),
        ],
      ),
    );
    }

  Widget _buildIDCard() {
    return SingleChildScrollView(
      child: Center(
        child: Container(
          margin: const EdgeInsets.all(30),
          padding: const EdgeInsets.all(20),
          decoration: BoxDecoration(
            color: UltimateFuturisticProfileCard.primaryLight.withAlpha((255 * 0.7).round()),
            borderRadius: BorderRadius.circular(16),
            boxShadow: const <BoxShadow>[BoxShadow(color: Colors.black45, blurRadius: 10, offset: Offset(0, 5))],
            border: Border.all(color: UltimateFuturisticProfileCard.neonAccent.withAlpha((255 * 0.5).round()), width: 2),
          ),
          child: Column(
            mainAxisSize: MainAxisSize.min,
            children: <Widget>[
              const CircleAvatar(
                radius: 50,
                backgroundImage: NetworkImage('https://www.gstatic.com/flutter-onestack-prototype/genui/example_1.jpg'),
                backgroundColor: Colors.transparent,
              ),
              const SizedBox(height: 15),
              const Text("ROHAN VERMA", style: TextStyle(color: Colors.white, fontSize: 22, fontWeight: FontWeight.bold)),
              const Text("Roll No: GLAU21BTECH12345", style: TextStyle(color: Colors.white70, fontSize: 16)),
              const SizedBox(height: 15),
              Row(
                mainAxisAlignment: MainAxisAlignment.spaceAround,
                children: <Widget>[
                  Column(
                    children: <Widget>[
                      Icon(Icons.school, color: UltimateFuturisticProfileCard.techAccent),
                      const SizedBox(height: 5),
                      const Text("CSE Dept.", style: TextStyle(color: Colors.white70)),
                    ],
                  ),
                  Column(
                    children: <Widget>[
                      Icon(Icons.calendar_today, color: UltimateFuturisticProfileCard.techAccent),
                      const SizedBox(height: 5),
                      const Text("2021", style: TextStyle(color: Colors.white70)),
                    ],
                  ),
                ],
              ),
              const SizedBox(height: 20),
              Container(
                width: 200,
                height: 50,
                padding: const EdgeInsets.all(8),
                decoration: BoxDecoration(
                  color: Colors.white,
                  borderRadius: BorderRadius.circular(8),
                  boxShadow: const <BoxShadow>[BoxShadow(color: Colors.black38, blurRadius: 5, offset: Offset(0, 3))],
                ),
                child: const Center(
                  child: Text("GLA University\nStudent ID Card", textAlign: TextAlign.center, style: TextStyle(color: Colors.black87, fontWeight: FontWeight.bold)),
                ),
              )
            ],
          ),
        ),
      ),
    );
  }

  Widget _buildUploadDocument() {
    return Center(
      child: UltraModernActionButton(
        icon: Icons.upload_file_outlined,
        label: "UPLOAD DOCUMENT",
        color: UltimateFuturisticProfileCard.aiAssistantColor,
        onPressed: () {
          ScaffoldMessenger.of(context).showSnackBar(
            const SnackBar(
              content: Text('Document upload feature coming soon!'),
              backgroundColor: UltimateFuturisticProfileCard.aiAssistantColor,
            ),
          );
        },
      ),
    );
  }

  Widget _buildLogout() {
    return Center(
      child: GlassmorphicCard(
        backgroundColor: UltimateFuturisticProfileCard.primaryLight.withAlpha((255 * 0.2).round()),
        child: Column(
          mainAxisSize: MainAxisSize.min,
          children: <Widget>[
            Icon(Icons.lock_outline, size: 80, color: Colors.redAccent.withAlpha((255 * 0.8).round())),
            const SizedBox(height: 20),
            const Text(
              "üîí You have been logged out.\nThank you for using the portal!",
              textAlign: TextAlign.center,
              style: TextStyle(color: Colors.white70, fontSize: 22),
            ),
            const SizedBox(height: 30),
            UltraModernActionButton(
              label: 'LOGIN AGAIN',
              icon: Icons.login,
              color: Colors.redAccent,
              onPressed: () {
                debugPrint("Attempting re-login...");
                ScaffoldMessenger.of(context).showSnackBar(
                  const SnackBar(
                    content: Text('Simulating re-login...'),
                    backgroundColor: Colors.redAccent,
                  ),
                );
              },
            ),
          ],
        ),
      ),
    );
  }

  Widget _getSelectedPage() {
    switch (_selectedMenuItem) {
      case 'Profile':
        return _buildProfile();
      case 'Academics':
        return _buildAcademics();
      case 'Attendance':
        return _buildAttendance();
      case 'Subjective Quiz':
        return _buildSubjectiveQuiz();
      case 'Result':
        return _buildResult();
      case 'Timetable':
        return _buildTimetable();
      case 'Library':
        return _buildLibrary();
      case 'ID Card':
        return _buildIDCard();
      case 'Upload Document':
        return _buildUploadDocument();
      case 'Logout':
        return _buildLogout();
      case 'Settings':
      case 'Help':
      case 'About':
        return _buildInfoPage(_selectedMenuItem);
      default: // Dashboard
        return _buildDashboard();
    }
  }

  Widget _buildInfoPage(String title) {
    return Center(
      child: GlassmorphicCard(
        backgroundColor: UltimateFuturisticProfileCard.primaryLight.withAlpha((255 * 0.2).round()),
        child: Column(
          mainAxisSize: MainAxisSize.min,
          children: <Widget>[
            Icon(Icons.info_outline, size: 80, color: UltimateFuturisticProfileCard.techAccent.withAlpha((255 * 0.8).round())),
            const SizedBox(height: 20),
            Text(
              title.toUpperCase(),
              style: const TextStyle(
                color: Colors.white,
                fontSize: 28,
                fontWeight: FontWeight.w900,
                letterSpacing: 2.0,
              ),
              textAlign: TextAlign.center,
            ),
            const SizedBox(height: 10),
            Text(
              'Content for "$title" is being developed.',
              style: const TextStyle(color: Colors.white70, fontSize: 16),
              textAlign: TextAlign.center,
            ),
          ],
        ),
      ),
    );
  }

  // ========== UI Helpers for Drawer ==========

  ListTile _menuTile(String title, IconData icon, Color iconColor) {
    return ListTile(
      leading: Icon(icon, color: iconColor),
      title: Text(title, style: const TextStyle(color: Colors.white)), // Changed to Colors.white
      onTap: () => _updateSelectedMenuItem(title),
      selected: _selectedMenuItem == title,
      selectedTileColor: UltimateFuturisticProfileCard.primaryLight.withAlpha((255 * 0.5).round()),
    );
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      backgroundColor: UltimateFuturisticProfileCard.primaryColor,
      appBar: AppBar(
        backgroundColor: UltimateFuturisticProfileCard.primaryColor,
        elevation: 0,
        iconTheme: const IconThemeData(color: Colors.white), // Set all AppBar icons to white
        title: const Text('GLA University', style: TextStyle(color: Colors.white, fontWeight: FontWeight.w700, letterSpacing: 1.0)),
        actions: <Widget>[
          PopupMenuButton<String>(
            onSelected: _updateSelectedMenuItem,
            icon: const Icon(Icons.more_vert), // Color now handled by AppBar's iconTheme
            itemBuilder: (BuildContext context) => <PopupMenuEntry<String>>[
              const PopupMenuItem<String>(
                value: 'Settings',
                child: Text('Settings', style: TextStyle(color: Colors.white)), // Changed to Colors.white
              ),
              const PopupMenuItem<String>(
                value: 'Help',
                child: Text('Help', style: TextStyle(color: Colors.white)), // Changed to Colors.white
              ),
              const PopupMenuItem<String>(
                value: 'About',
                child: Text('About', style: TextStyle(color: Colors.white)), // Changed to Colors.white
              ),
            ],
            color: UltimateFuturisticProfileCard.primaryColor.withAlpha((255 * 0.9).round()), // Dark background for menu
            elevation: 5,
          ),
          const SizedBox(width: 8),
        ],
      ),
      drawer: Drawer(
        child: Container(
          decoration: const BoxDecoration(
            gradient: LinearGradient(
              colors: <Color>[
                UltimateFuturisticProfileCard.primaryColor,
                UltimateFuturisticProfileCard.primaryLight,
              ],
              begin: Alignment.topCenter,
              end: Alignment.bottomRight,
            ),
          ),
          child: ListView(
            padding: EdgeInsets.zero,
            children: <Widget>[
              DrawerHeader(
                decoration: BoxDecoration(color: UltimateFuturisticProfileCard.primaryColor.withAlpha((255 * 0.7).round())),
                child: SingleChildScrollView(
                  child: Column(
                    crossAxisAlignment: CrossAxisAlignment.start,
                    mainAxisAlignment: MainAxisAlignment.end,
                    children: <Widget>[
                      Container(
                        width: 60,
                        height: 60,
                        decoration: BoxDecoration(
                          shape: BoxShape.circle,
                          color: Colors.white.withAlpha((255 * 0.1).round()),
                          border: Border.all(color: UltimateFuturisticProfileCard.neonAccent.withAlpha((255 * 0.7).round()), width: 2),
                          boxShadow: <BoxShadow>[
                            BoxShadow(
                              color: UltimateFuturisticProfileCard.neonAccent.withAlpha((255 * 0.3).round()),
                              blurRadius: 10,
                              spreadRadius: 2,
                            ),
                          ],
                        ),
                        child: ClipOval(
                          child: Image.network(
                            'https://www.gstatic.com/flutter-onestack-prototype/genui/example_1.jpg',
                            fit: BoxFit.cover,
                          ),
                        ),
                      ),
                      const SizedBox(height: 8),
                      const Text(
                        'Rohan Verma',
                        style: TextStyle(color: Colors.white, fontSize: 18, fontWeight: FontWeight.bold),
                      ),
                      const SizedBox(height: 2),
                      const Text(
                        'Roll No: GLAU21BTECH12345',
                        style: TextStyle(color: Colors.white70, fontSize: 14),
                      ),
                    ],
                  ),
                ),
              ),
              _menuTile('Dashboard', Icons.dashboard_outlined, UltimateFuturisticProfileCard.neonAccent),
              _menuTile('Profile', Icons.person_outline, UltimateFuturisticProfileCard.techAccent),
              _menuTile('Academics', Icons.school_outlined, UltimateFuturisticProfileCard.aiAssistantColor),
              _menuTile('Attendance', Icons.event_available_outlined, UltimateFuturisticProfileCard.neonAccent),
              _menuTile('Subjective Quiz', Icons.assignment_outlined, UltimateFuturisticProfileCard.techAccent),
              _menuTile('Result', Icons.emoji_events_outlined, UltimateFuturisticProfileCard.aiAssistantColor),
              _menuTile('Timetable', Icons.schedule_outlined, UltimateFuturisticProfileCard.neonAccent),
              _menuTile('Library', Icons.local_library_outlined, UltimateFuturisticProfileCard.techAccent),
              _menuTile('ID Card', Icons.badge_outlined, UltimateFuturisticProfileCard.aiAssistantColor),
              _menuTile('Upload Document', Icons.upload_file_outlined, UltimateFuturisticProfileCard.neonAccent),
              const Divider(color: Colors.white10),
              _menuTile('Logout', Icons.logout, Colors.redAccent),
            ],
          ),
        ),
      ),
      body: Container(
        decoration: const BoxDecoration(
          gradient: LinearGradient(
            colors: <Color>[
              UltimateFuturisticProfileCard.primaryColor,
              UltimateFuturisticProfileCard.primaryLight,
            ],
            begin: Alignment.topCenter,
            end: Alignment.bottomRight,
          ),
        ),
        child: _getSelectedPage(),
      ),
    );
  }
}
